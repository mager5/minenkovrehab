"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[856],{9856:function(e,a,r){var n=r(7437),t=r(2265),o=r(9805),s=r(3097),l=r(2410);a.Z=e=>{let{isOpen:a,onClose:r}=e,[i,c]=(0,t.useState)({name:"",phone:"",service:"",message:""}),[d,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(!1),[g,b]=(0,t.useState)(!1),[x,p]=(0,t.useState)(null),[f,v]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(a){c({name:"",phone:"",service:"",message:""}),m(!1),b(!1),v(!1);let e=new Date().getTime();window.history.replaceState({},"","".concat(window.location.pathname,"?modal=").concat(e))}},[a]);let w=(0,t.useRef)(null),formatPhoneNumber=e=>{if(!e)return e;let a=e.replace(/\D/g,""),r=a;(a.startsWith("8")||a.startsWith("7"))&&(r=a.substring(1));let n=r.length,t="+7";return n>0&&(t+=" (".concat(r.substring(0,Math.min(3,n)))),n>3&&(t+=") ".concat(r.substring(3,Math.min(6,n)))),n>6&&(t+="-".concat(r.substring(6,Math.min(8,n)))),n>8&&(t+="-".concat(r.substring(8,Math.min(10,n)))),t},handleChange=e=>{let{name:a,value:r}=e.target;if("phone"===a){let e=formatPhoneNumber(r);if(e.length>18)return;c(r=>({...r,[a]:e}))}else c(e=>({...e,[a]:r}))},handleFocus=e=>{p(e)},handleBlur=()=>{p(null)};return(0,n.jsx)(o.u,{appear:!0,show:a,as:t.Fragment,children:(0,n.jsxs)(s.V,{as:"div",className:"relative z-50",onClose:r,initialFocus:w,onKeyDown:e=>{"Escape"===e.key&&r()},children:[(0,n.jsx)(o.u.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm","aria-hidden":"true"})}),(0,n.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,n.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,n.jsx)(o.u.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,n.jsxs)(s.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-xl bg-white p-8 shadow-lg transition-all duration-500 border border-gray-100 relative",children:[(0,n.jsx)("button",{type:"button",className:"absolute top-4 right-4 p-2 rounded-full bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-primary transition-all duration-300 z-10",onClick:r,"aria-label":"Закрыть",children:(0,n.jsx)(l.QAE,{className:"h-5 w-5 text-gray-700"})}),(0,n.jsxs)(s.V.Title,{as:"h2",className:"text-2xl font-bold text-primary mb-8 relative inline-block",id:"booking-modal-title",children:["Записаться на приём",(0,n.jsx)("span",{className:"block h-1.5 w-24 bg-accent mt-2 rounded-full","aria-hidden":"true"})]}),h?(0,n.jsxs)("div",{className:"bg-green-50 border-l-4 border-accent p-6 rounded-lg shadow-md animate-fadeIn",role:"status","aria-live":"polite",children:[(0,n.jsxs)("div",{className:"flex items-center mb-3",children:[(0,n.jsx)("svg",{className:"w-6 h-6 mr-3 text-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,n.jsx)("p",{className:"font-bold text-lg text-primary",children:"Запись оформлена!"})]}),(0,n.jsx)("p",{className:"text-gray-700",children:"Благодарю за обращение. Я свяжусь с вами в ближайшее время для подтверждения записи."}),(0,n.jsx)("div",{className:"mt-5",children:(0,n.jsx)("button",{type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-accent bg-white border border-accent rounded-md hover:bg-accent hover:text-white focus:outline-none focus:ring-2 focus:ring-accent transition-all duration-300",onClick:r,ref:w,children:"Закрыть"})})]}):(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f&&(u(!0),b(!1),setTimeout(()=>{u(!1),m(!0),c({name:"",phone:"",service:"",message:""}),v(!1)},1500))},className:"space-y-6","aria-labelledby":"booking-modal-title",children:[(0,n.jsxs)("div",{className:"form-group relative overflow-hidden",children:[(0,n.jsx)("label",{htmlFor:"name",className:"sr-only",children:"Ваше имя"}),(0,n.jsx)("input",{type:"text",id:"name",name:"name",value:i.name,onChange:handleChange,onFocus:()=>handleFocus("name"),onBlur:handleBlur,className:"w-full bg-gray-50 border-0 border-b-2 rounded-t-lg px-4 py-3.5 text-gray-800 transition-all duration-300 focus:outline-none \n                        ".concat("name"===x?"border-accent shadow-sm":"border-gray-200"),required:!0,placeholder:"Ваше имя","aria-required":"true",ref:w}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-accent transition-all duration-500 \n                        ".concat("name"===x?"w-full":""),"aria-hidden":"true"})]}),(0,n.jsxs)("div",{className:"form-group relative overflow-hidden",children:[(0,n.jsx)("label",{htmlFor:"phone",className:"sr-only",children:"Телефон"}),(0,n.jsx)("input",{type:"tel",id:"phone",name:"phone",value:i.phone,onChange:handleChange,onFocus:()=>handleFocus("phone"),onBlur:handleBlur,className:"w-full bg-gray-50 border-0 border-b-2 rounded-t-lg px-4 py-3.5 text-gray-800 transition-all duration-300 focus:outline-none \n                        ".concat("phone"===x?"border-accent shadow-sm":"border-gray-200"),required:!0,placeholder:"Телефон",pattern:"\\+7 \\([0-9]{3}\\) [0-9]{3}-[0-9]{2}-[0-9]{2}","aria-required":"true","aria-describedby":"phone-format"}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-accent transition-all duration-500 \n                        ".concat("phone"===x?"w-full":""),"aria-hidden":"true"}),(0,n.jsx)("div",{id:"phone-format",className:"sr-only",children:"Формат телефона: +7 (999) 999-99-99"})]}),(0,n.jsxs)("div",{className:"form-group relative overflow-hidden",children:[(0,n.jsx)("label",{htmlFor:"service",className:"sr-only",children:"Выберите услугу"}),(0,n.jsxs)("select",{id:"service",name:"service",value:i.service,onChange:handleChange,onFocus:()=>handleFocus("service"),onBlur:handleBlur,className:"w-full bg-gray-50 border-0 border-b-2 rounded-t-lg px-4 py-3.5 text-gray-800 transition-all duration-300 focus:outline-none appearance-none\n                        ".concat("service"===x?"border-accent shadow-sm":"border-gray-200"," \n                        [&>option]:bg-white [&>option]:py-2 [&>option]:px-4 [&>option]:text-gray-800 \n                        [&>option:hover]:bg-accent [&>option:hover]:text-white [&>option:checked]:bg-accent/20"),required:!0,"aria-required":"true",style:{backgroundImage:"url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23888' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpath d='m6 9 6 6 6-6'/%3e%3c/svg%3e\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center",backgroundSize:"1.25rem",paddingRight:"2.5rem"},children:[(0,n.jsx)("option",{value:"",disabled:!0,children:"Выберите услугу"}),[{id:"online-consultation",name:"Онлайн-консультация"},{id:"online-support",name:"Онлайн-ведение"},{id:"movement-club",name:"Клуб \xabФОРМУЛА ДВИЖЕНИЯ\xbb"},{id:"rehab-protocol",name:"Реабилитационный протокол"},{id:"course",name:"Курс или вебинар"}].map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-accent transition-all duration-500 \n                        ".concat("service"===x?"w-full":""),"aria-hidden":"true"})]}),(0,n.jsxs)("div",{className:"form-group relative overflow-hidden",children:[(0,n.jsx)("label",{htmlFor:"message",className:"sr-only",children:"Ваше сообщение"}),(0,n.jsx)("textarea",{id:"message",name:"message",value:i.message,onChange:handleChange,onFocus:()=>handleFocus("message"),onBlur:handleBlur,rows:4,className:"w-full bg-gray-50 border-0 border-b-2 rounded-t-lg px-4 py-3.5 text-gray-800 transition-all duration-300 focus:outline-none resize-none \n                        ".concat("message"===x?"border-accent shadow-sm":"border-gray-200","\n                        font-medium placeholder:text-gray-500 placeholder:font-normal tracking-wide"),placeholder:"Ваше сообщение","aria-required":"false"}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-accent transition-all duration-500 \n                        ".concat("message"===x?"w-full":""),"aria-hidden":"true"})]}),(0,n.jsx)("div",{className:"form-group mb-2",children:(0,n.jsxs)("label",{className:"flex items-center cursor-pointer group",htmlFor:"modal-consent",children:[(0,n.jsxs)("div",{className:"relative flex items-center mr-3",children:[(0,n.jsx)("input",{id:"modal-consent",className:"absolute opacity-0 w-5 h-5 cursor-pointer",required:!0,"aria-required":"true",type:"checkbox",checked:f,onChange:e=>{v(e.target.checked)}}),(0,n.jsx)("div",{className:"w-5 h-5 border-2 rounded flex items-center justify-center transition-all duration-300 flex-shrink-0 \n                            ".concat(f?"bg-accent border-accent":"bg-white border-gray-300 group-hover:border-accent"),"aria-hidden":"true",children:f&&(0,n.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})})]}),(0,n.jsxs)("span",{className:"text-sm text-gray-700 pt-0.5 text-left",children:["Я даю согласие на обработку персональных данных в соответствии с ",(0,n.jsx)("a",{href:"/policy",className:"text-accent hover:underline focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2",target:"_blank",rel:"noopener noreferrer",children:"политикой конфиденциальности"})]})]})}),g&&(0,n.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow-sm",role:"alert","aria-live":"assertive",children:[(0,n.jsxs)("div",{className:"flex items-center mb-2",children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-2 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,n.jsx)("p",{className:"font-bold text-red-800",children:"Произошла ошибка!"})]}),(0,n.jsx)("p",{className:"text-red-700",children:"Не удалось отправить заявку. Пожалуйста, попробуйте снова позже."})]}),(0,n.jsx)("div",{className:"mt-8",children:(0,n.jsx)("button",{type:"submit",className:"w-full py-4 rounded-lg transition-all duration-500 font-semibold text-lg relative overflow-hidden ".concat(d?"bg-gray-200 cursor-not-allowed text-gray-500":f?"bg-accent text-white hover:bg-accent-dark":"bg-white text-accent border-2 border-accent cursor-not-allowed"),disabled:d||!f,"aria-disabled":d||!f,"aria-busy":d,children:(0,n.jsxs)("span",{className:"relative z-10 flex items-center justify-center",children:[d?"Отправка...":"Записаться",!d&&(0,n.jsx)("svg",{className:"ml-2 w-5 h-5 transition-transform duration-300 transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})})]})]})})})})]})})}}}]);